(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{510:function(s,a,e){"use strict";e.r(a);var t=e(11),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-docker镜像"}},[s._v("1.docker镜像")])]),a("li",[a("a",{attrs:{href:"#_2-镜像获取与查找"}},[s._v("2.镜像获取与查找")])]),a("li",[a("a",{attrs:{href:"#_3-删除镜像"}},[s._v("3.删除镜像")])]),a("li",[a("a",{attrs:{href:"#自己制作一个镜像"}},[s._v("自己制作一个镜像")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-编写dockerfile"}},[s._v("1.编写dockerfile")])]),a("li",[a("a",{attrs:{href:"#_2-添加nginx配置文件"}},[s._v("2.添加nginx配置文件")])]),a("li",[a("a",{attrs:{href:"#_3-打包项目"}},[s._v("3.打包项目")])]),a("li",[a("a",{attrs:{href:"#_4-构建镜像"}},[s._v("4.构建镜像")])]),a("li",[a("a",{attrs:{href:"#_5-启动镜像"}},[s._v("5.启动镜像")])]),a("li",[a("a",{attrs:{href:"#_6-访问项目"}},[s._v("6.访问项目")])]),a("li",[a("a",{attrs:{href:"#_7-其他命令"}},[s._v("7.其他命令")])])])])])]),a("p"),s._v(" "),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/article/4.jpg",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_1-docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-docker镜像"}},[s._v("#")]),s._v(" 1.docker镜像")]),s._v(" "),a("p",[s._v("当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载，默认是从 Docker Hub 公共镜像源下载")]),s._v(" "),a("p",[s._v("查看已有的镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/docker-images.png",alt:""}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("REPOSITORY：表示镜像的仓库源")])]),s._v(" "),a("li",[a("p",[s._v("TAG：镜像的标签")])]),s._v(" "),a("li",[a("p",[s._v("IMAGE ID：镜像ID")])]),s._v(" "),a("li",[a("p",[s._v("CREATED：镜像创建时间")])]),s._v(" "),a("li",[a("p",[s._v("SIZE：镜像大小")])])]),s._v(" "),a("h2",{attrs:{id:"_2-镜像获取与查找"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-镜像获取与查找"}},[s._v("#")]),s._v(" 2.镜像获取与查找")]),s._v(" "),a("p",[a("strong",[s._v("获取镜像")]),s._v("\n当我们在本地主机上使用一个不存在的镜像时 Docker 就会自动下载这个镜像。如果我们想预先下载这个镜像，\n我们可以使用 docker pull 命令来下载它。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull centos:8\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("格式：镜像名称：版本")])]),s._v(" "),a("p",[a("strong",[s._v("镜像查找")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search tomcat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/docker-search.png",alt:""}})]),s._v(" "),a("ul",[a("li",[a("p",[s._v("NAME: 镜像仓库源的名称")])]),s._v(" "),a("li",[a("p",[s._v("DESCRIPTION: 镜像的描述")])]),s._v(" "),a("li",[a("p",[s._v("OFFICIAL: 是否 docker 官方发布")])]),s._v(" "),a("li",[a("p",[s._v("stars: 类似 Github 里面的 star，表示点赞、喜欢的意思。")])]),s._v(" "),a("li",[a("p",[s._v("AUTOMATED: 自动构建。")])])]),s._v(" "),a("h2",{attrs:{id:"_3-删除镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-删除镜像"}},[s._v("#")]),s._v(" 3.删除镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"自己制作一个镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自己制作一个镜像"}},[s._v("#")]),s._v(" 自己制作一个镜像")]),s._v(" "),a("p",[s._v("这里我以一个Vue项目为例，制作一个镜像")]),s._v(" "),a("h3",{attrs:{id:"_1-编写dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写dockerfile"}},[s._v("#")]),s._v(" 1.编写dockerfile")]),s._v(" "),a("p",[s._v("在路径/usr/local/software/docker/nginx/下创建Dockerfile文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定基础镜像")]),s._v("\nFROM nginx\nLABEL "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("author")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Mr.Fire\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除基础镜像中的Nginx配置文件替换成自己写的")]),s._v("\nRUN "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /etc/nginx/conf.d/default.conf\nADD nginx.conf /etc/nginx/conf.d/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将打包好的vue项目复制到基础镜像中Nginx配置文件的指定路径下")]),s._v("\nCOPY dist/ /usr/share/nginx/html/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("nginx.conf：我指定的NGINX配置文件")]),s._v(" "),a("li",[s._v("dist：项目打包后的文件")])]),s._v(" "),a("h3",{attrs:{id:"_2-添加nginx配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-添加nginx配置文件"}},[s._v("#")]),s._v(" 2.添加nginx配置文件")]),s._v(" "),a("p",[s._v("在路径/usr/local/software/docker/nginx/下创建nginx配置文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" nginx.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("编辑内容如下图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/deploy1.png",alt:""}})]),s._v(" "),a("p",[s._v("主要内容：配置端口，宿主机ip（服务器ip），首页")]),s._v(" "),a("h3",{attrs:{id:"_3-打包项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-打包项目"}},[s._v("#")]),s._v(" 3.打包项目")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("上传打包好的dist文件夹到路径/usr/local/software/docker/nginx/")]),s._v(" "),a("h3",{attrs:{id:"_4-构建镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-构建镜像"}},[s._v("#")]),s._v(" 4.构建镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" javaessat "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("-t ：指定要创建的目标镜像名")])]),s._v(" "),a("li",[a("p",[s._v(".：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/deploy2.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"_5-启动镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动镜像"}},[s._v("#")]),s._v(" 5.启动镜像")]),s._v(" "),a("p",[s._v("查看镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/deploy3.png",alt:""}})]),s._v(" "),a("p",[s._v("用创建好的镜像启动一个容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" front "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v(":8081 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" javaessay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("– name：指定容器名")]),s._v(" "),a("ul",[a("li",[s._v("p：指定容器和宿主机之间的端口映射")]),s._v(" "),a("li",[s._v("d：守护进程运行")]),s._v(" "),a("li",[s._v("javaessay：指定启动 javaessay 镜像")])]),s._v(" "),a("p",[s._v("此时如果我们想多启动几个，就非常简单了")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" front2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8082")]),s._v(":8081 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" javaessay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/deploy6.png",alt:""}})]),s._v(" "),a("p",[s._v("再次启动一个，可以看到已经有两个容器在运行，就相当于部署了两个。这当然你还可以基于此镜像启动更多容器，就体现了docker横向扩展的能力。")]),s._v(" "),a("h3",{attrs:{id:"_6-访问项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-访问项目"}},[s._v("#")]),s._v(" 6.访问项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://fire-repository.oss-cn-beijing.aliyuncs.com/docker/deploy4.png",alt:""}})]),s._v(" "),a("p",[a("a",{attrs:{href:"http://60.205.187.137:8081/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://60.205.187.137:8081/"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"http://60.205.187.137:8082/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://60.205.187.137:8082/"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("两个端口均能正常访问")]),s._v(" "),a("h3",{attrs:{id:"_7-其他命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-其他命令"}},[s._v("#")]),s._v(" 7.其他命令")]),s._v(" "),a("p",[s._v("停止容器：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop 容器id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("重启：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart 容器id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("删除容器：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" 1e560fca3906\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" name\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看日志：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" bf08b7f2cd89\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);